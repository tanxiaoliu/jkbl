function shareCount(e,a){var n="//act.mama.cn/home/v6/share/index/count",r=n+"?parse="+e+"&zt_id="+a+"&callback=?";jQuery.getJSON(r,function(){return!0})}function fnShare(e){var a=e.timestamp,n=e.nonceStr,r=e.signature,t=e.appId;wx.config({debug:!1,appId:t,timestamp:a,nonceStr:n,signature:r,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"]})}var zt_id=J_PARAM.mshare.zt_id||0,ua=window.navigator.userAgent.toLowerCase();"micromessenger"==ua.match(/MicroMessenger/i)&&$.getScript("//res.wx.qq.com/open/js/jweixin-1.0.0.js",function(){$.ajax({type:"get",url:"//www.mama.cn/index.php?a=Listing&d=getShare&callback=fnShare",data:{nowUrl:encodeURIComponent(location.href.split("#")[0])},dataType:"jsonp",success:function(e){fnShare(e)}}),wx.ready(function(){wx.onMenuShareTimeline({title:J_PARAM.mshare.title,link:J_PARAM.mshare.link,imgUrl:J_PARAM.mshare.image,success:function(){shareCount("cirfriend",zt_id)}}),wx.onMenuShareAppMessage({title:J_PARAM.mshare.title,desc:J_PARAM.mshare.desc,link:J_PARAM.mshare.link,imgUrl:J_PARAM.mshare.image,type:"link",dataUrl:"",success:function(){shareCount("friend",zt_id)}}),wx.onMenuShareQQ({title:J_PARAM.mshare.title,link:J_PARAM.mshare.link,imgUrl:J_PARAM.mshare.image,success:function(){shareCount("qq",zt_id)}}),wx.onMenuShareWeibo({title:J_PARAM.mshare.title,link:J_PARAM.mshare.link,imgUrl:J_PARAM.mshare.image,success:function(){shareCount("",zt_id)}})}),wx.error(function(){})}),Mama.shareResultCallback=function(e,a){1==a&&(1==e?shareCount("friend",zt_id):2==e?shareCount("cirfriend",zt_id):3==e?shareCount("sinaweibo",zt_id):4==e?shareCount("qqzone",zt_id):5==e?shareCount("tencentweibo",zt_id):6==e?shareCount("qq",zt_id):shareCount("",zt_id))},Mama.ygShareResultCallback=function(){shareCount("",zt_id)};var appVer=parseFloat(Mama.SYS.appVer);if(appVer>6.2&&Mama.SYS.mmq)try{Mama.navRightButtonInfo({text:"分享",type:4,ext:{mshareTitle:J_PARAM.mshare.title,mshareDesc:J_PARAM.mshare.desc,mshareImage:J_PARAM.mshare.image,mshareUrl:J_PARAM.mshare.link}})}catch(e){}else Mama.getShare=function(funcname){var shareInfo='{ "mshareTitle":"'+J_PARAM.mshare.title+'", "mshareDesc":"'+J_PARAM.mshare.desc+'", "mshareImage":"'+J_PARAM.mshare.image+'", "mshareUrl":"'+J_PARAM.mshare.link+'" }';return"undefined"==typeof funcname||null==funcname?shareInfo:void eval(funcname+"('"+shareInfo+"')")};