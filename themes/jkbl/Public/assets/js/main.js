$(function(){if($("#tab").length){$("#tab .hd").on("click","li",function(){$(this).addClass("active").siblings().removeClass("active");var t=$(this).index();e.slideTo(t)});var e=new Swiper("#tab .swiper-container",{effect:"fade",fade:{crossFade:!0},autoHeight:!0,onlyExternal:!0})}var t,a,i;$("body").on("click",".j-exchange",function(){$(this).hasClass("disable")||(t=$(this).attr("data-publicid"),a=$(this).attr("data-mallid"),i=$(this).attr("data-entity"),layer.open({type:1,className:"details-form-pop",content:template("formTpl",{entity:i})}))}).on("click",".submit-exchange",function(){for(var e=$("#form").serializeArray(),i=0,n=e.length;n>i;i++)if(!e[i].value)return void layer.open({content:"您还有未填写完的内容哦，请完善后再提交",time:1.5});var o=/0?(13|14|15|18|17)[0-9]{9}/,l=$("#form .j-phone").val();if(!o.test(l))return void layer.open({content:"请输入有效的手机号码！",time:1.5});var r=layer.open({type:2});$.ajax({type:"post",url:"/index.php?s=/addon/Credit/Mall/exchange&public_id="+t+"&mall_id="+a,data:$("#form").serialize(),success:function(e){layer.open(0==e.code?{content:"兑换成功",time:1.5,end:function(){location.reload()}}:{content:e.msg,time:1.5})},complete:function(){layer.close(r)}})})});