<!DOCTYPE html>
<html>
<head>
    <tc_include file="Public:head" />
    <link rel="stylesheet" href="__TMPL__Public/assets/css/index.css">
</head>
<body>

<div>
    <tc_include file="Public:nav1" />
    <div class="rank-content-nav">
        <ul>
            <li <if condition="$grouptype eq 0">class="gray_rank"</if>><a style="color:white;" href="{:U('Index/rank')}">个人排名</a></li>
            <li <if condition="$grouptype eq 1">class="gray_rank"</if>><a style="color:white;" href="{:U('Index/rank', array('grouptype'=>1))}">联盟排名</a></li>
        </ul>
    </div>
    <p class="type-title">{$type}</p>
    <div class="content" style="margin-top:2rem;">
        <a class="detail-btn flatbtn modaltrigger" href="#loginmodal" style="position: relative;top: 1.6rem;left: 10.6rem;">详情</a>
        <div class="one" style="padding-top: 1rem;">
            <img src="__TMPL__Public/assets/images/hg.png" class="hg">
            <span class="head" style="background-image: url('{$data[0]['avatar']|default='__TMPL__Public/assets/images/0.png'}');"></span>
            <div class="r_orange" style="bottom: 0.8rem;">{$data[0]['nick_name']|default='待定'}</div>
            <div class="r_blue">{$data[0]['num']|default='0'}步</div>
        </div>
        <div class="two">
            <span class="head" style="background-image: url('{$data[1]['avatar']|default='__TMPL__Public/assets/images/0.png'}');"></span>
            <div class="r_orange" style="bottom: 0.8rem;">{$data[1]['nick_name']|default='待定'}</div>
            <div class="r_blue">{$data[1]['num']|default='0'}步</div>
        </div>
        <div class="three">
            <span class="head" style="background-image: url('{$data[2]['avatar']|default='__TMPL__Public/assets/images/0.png'}');"></span>
            <div class="r_orange" style="bottom: 0.8rem;">{$data[2]['nick_name']|default='待定'}</div>
            <div class="r_blue">{$data[3]['num']|default='0'}步</div>
        </div>
        <div class="award"></div>
        <div class="rank">
            <div style="width:100%; height:11rem; overflow:scroll; margin-top: -7rem;">
                <volist name="data" id="vo" offset="4" length='500'>
                    <ul>
                        <li class="rank-num">NO.{$key}</li>
                        <li>
                            <span class="rank_head" style="background-image: url('{$vo.avatar|default='__TMPL__Public/assets/images/0.png'}');"></span>
                            <div class="r_orange" style="margin-left: 1.1rem;">{$vo.nick_name}</div>
                        </li>
                        <li class="count">{$vo.num}步</li>
                    </ul>
                </volist>
            </div>
            <ul class="my-rank" style="background-color: #2372ad;">
                <li class="rank-num">NO.{$user['rank']|default='无'}</li>
                <li>
                    <span class="rank_head" style="background-image: url('{$user['avatar']|default='__TMPL__Public/assets/images/0.png'}');"></span>
                    <span class="r_orange"><if condition="$type lt 4">当前自己排名<else/>当前自组排名</if></span>
                </li>
                <li class="count">{$user['num']|default='0'}步</li>
            </ul>
        </div>
    </div>
    <tc_include file="Public:footer" />
    <div id="loginmodal" style="display:none;">
            <div class="center" style="margin: 0.5rem 0;"><a href="{:U('Index/rank', array('type'=>1,'grouptype'=>$grouptype))}"><input type="button" class="flatbtn-blu hidemodal" value="昨日记录"></a></div>
            <div class="center" style="margin: 0.5rem 0;"><a href="{:U('Index/rank', array('type'=>2,'grouptype'=>$grouptype))}"><input type="button" class="flatbtn-blu hidemodal" value="上周记录"></a></div>
            <div class="center" style="margin: 0.5rem 0;"><a href="{:U('Index/rank', array('type'=>3,'grouptype'=>$grouptype))}"><input type="button" class="flatbtn-blu hidemodal" value="上月记录"></a></div>
        <form id="loginform" name="loginform" method="post" action="{:U('Index/rank')}" onsubmit="return check(this)">
            <input type="hidden" name="type" id="type" value="4">
            <input type="hidden" name="grouptype" id="grouptype" value="{$grouptype}">
            <div class="center" style="margin: 0.5rem 0;padding-right: 2rem;"><span style="color: #18abe1;">结束时间：</span><span><input type="date" name="startTime" id="startTime" style="height: 1rem;"></span></div>
            <div class="center" style="margin: 0.5rem 0;padding-right: 2rem;"><span style="color: #18abe1;">开始时间：</span><span><input type="date" name="endTime" id="endTime" style="height: 1rem;"></span></div>
            <div class="center" style="margin: 0.5rem 0;"><input type="submit" class="flatbtn-blu hidemodal" value="搜索"></a></div>
        </form>
    </div>
</div>
<script>
    $(function(){
        $('.modaltrigger').leanModal({ top: 110, overlay: 0.45});
        $(".rank-top ul li").click(function(){
            $(this).addClass("blue").siblings().removeClass("blue");
        });
        $(".rank-content-nav ul li").click(function(){
            $(this).addClass("gray_rank").siblings().removeClass("gray_rank");
        });
    });
    function check(form) {
        if(form.startTime.value=='') {
            alert("请输入开始时间!");
            form.startTime.focus();
            return false;
        }
        if(form.endTime.value=='') {
            alert("请输入结束时间!");
            form.endTime.focus();
            return false;
        }
        if(form.startTime.value > form.endTime.value){
            alert("开始时间不能结束时间!");
            form.endTime.focus();
            return false;
        }
    }
</script>
<script src="__TMPL__Public/assets/js/jquery-1.9.1.min.js"></script>
<script src="__TMPL__Public/assets/js/jquery.leanModal.min.js"></script>
</body>
</html>